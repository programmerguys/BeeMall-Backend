import{_ as C,r as V,g as j,y as z,z as R,G as A,o as _,c as U,w as a,b as g,f as o,q as f,m as D,K as p,s as d,H as N,I as $,i as q,h as M,l as G,j as I,L as W,d as H,M as J,N as K,O as L,P as O,E as Q,Q as X,R as E,J as Y,S as Z,T as ee}from"./index.b5a3525d.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                   *//* empty css                *//* empty css                  *//* empty css                 */const le=["src"],oe={class:"dialog-footer"},te={__name:"DialogAddSwiper",props:{type:String,reload:Function},setup(h,{expose:u}){const l=h,n=V(null),e=j({uploadImgServer:z,token:R("token")||"",visible:!1,ruleForm:{url:"",link:"",sort:""},rules:{url:[{required:"true",message:"\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change"]}],sort:[{required:"true",message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change"]}]},id:""}),b=r=>{d.get(`/carousels/${r}`).then(t=>{e.ruleForm={url:t.carouselUrl,link:t.redirectUrl,sort:t.carouselRank}})},v=r=>{const t=r.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(t))return p.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},k=r=>{e.ruleForm.url=r.data||""},s=r=>{e.visible=!0,r?(e.id=r,b(r)):e.ruleForm={url:"",link:"",sort:""}},F=()=>{e.visible=!1},m=()=>{console.log(n.value.validate),n.value.validate(r=>{r&&(l.type=="add"?d.post("/carousels",{carouselUrl:e.ruleForm.url,redirectUrl:e.ruleForm.link,carouselRank:e.ruleForm.sort}).then(()=>{p.success("\u6DFB\u52A0\u6210\u529F"),e.visible=!1,l.reload&&l.reload()}):d.put("/carousels",{carouselId:e.id,carouselUrl:e.ruleForm.url,redirectUrl:e.ruleForm.link,carouselRank:e.ruleForm.sort}).then(()=>{p.success("\u4FEE\u6539\u6210\u529F"),e.visible=!1,l.reload&&l.reload()}))})};return u({open:s,close:F}),(r,t)=>{const y=A("Plus"),w=N,S=$,i=q,x=M,B=G,P=I,T=W;return _(),U(T,{title:h.type=="add"?"\u6DFB\u52A0\u8F6E\u64AD\u56FE":"\u4FEE\u6539\u8F6E\u64AD\u56FE",modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=c=>e.visible=c),width:"400px"},{footer:a(()=>[g("span",oe,[o(P,{onClick:t[2]||(t[2]=c=>e.visible=!1)},{default:a(()=>[f("\u53D6 \u6D88")]),_:1}),o(P,{type:"primary",onClick:m},{default:a(()=>[f("\u786E \u5B9A")]),_:1})])]),default:a(()=>[o(B,{model:e.ruleForm,rules:e.rules,ref_key:"formRef",ref:n,"label-width":"100px",class:"good-form"},{default:a(()=>[o(i,{label:"\u56FE\u7247",prop:"url"},{default:a(()=>[o(S,{class:"avatar-uploader",action:e.uploadImgServer,accept:"jpg,jpeg,png",headers:{token:e.token},"show-file-list":!1,"before-upload":v,"on-success":k},{default:a(()=>[e.ruleForm.url?(_(),D("img",{key:0,style:{width:"200px",height:"100px",border:"1px solid #e9e9e9"},src:e.ruleForm.url,class:"avatar"},null,8,le)):(_(),U(w,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(y)]),_:1}))]),_:1},8,["action","headers"])]),_:1}),o(i,{label:"\u8DF3\u8F6C\u94FE\u63A5",prop:"link"},{default:a(()=>[o(x,{type:"text",modelValue:e.ruleForm.link,"onUpdate:modelValue":t[0]||(t[0]=c=>e.ruleForm.link=c)},null,8,["modelValue"])]),_:1}),o(i,{label:"\u6392\u5E8F\u503C",prop:"sort"},{default:a(()=>[o(x,{type:"number",modelValue:e.ruleForm.sort,"onUpdate:modelValue":t[1]||(t[1]=c=>e.ruleForm.sort=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}};var ae=C(te,[["__scopeId","data-v-6c3e84de"],["__file","/Users/picopicopico/Programmer/Project/Web_Project/vue3-admin/src/components/DialogAddSwiper.vue"]]);const re={class:"header"},se=["src"],ne=["href"],ie={__name:"Swiper",setup(h){const u=V(),l=j({loading:!1,tableData:[],currentPage:1,pageSize:10,type:"add",multipleSelection:[],total:0});H(()=>{n()});const n=()=>{l.loading=!0,d.get("/carousels",{params:{pageNumber:l.currentPage,pageSize:l.pageSize}}).then(s=>{l.tableData=s.list,l.total=s.totalCount,l.currentPage=s.currPage,l.loading=!1})},e=()=>{console.log("addSwiper",u.value),l.type="add",u.value.open()},b=s=>{l.multipleSelection=s},v=()=>{if(!l.multipleSelection.length){p.error("\u8BF7\u9009\u62E9\u9879");return}d.delete("/carousels",{data:{ids:l.multipleSelection.map(s=>s.carouselId)}}).then(()=>{p.success("\u5220\u9664\u6210\u529F"),n()})},k=s=>{l.currentPage=s,n()};return(s,F)=>{const m=I,r=J,t=K,y=L,w=O,S=Q;return _(),D(X,null,[o(S,{class:"swiper-container"},{header:a(()=>[g("div",re,[o(m,{type:"primary",icon:E(Z),onClick:e},{default:a(()=>[f("\u589E\u52A0")]),_:1},8,["icon"]),o(r,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",onConfirm:v},{reference:a(()=>[o(m,{type:"danger",icon:E(ee)},{default:a(()=>[f("\u6279\u91CF\u5220\u9664")]),_:1},8,["icon"])]),_:1})])]),default:a(()=>[o(y,{load:l.loading,ref:"multipleTable",data:l.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:b},{default:a(()=>[o(t,{type:"selection",width:"55"}),o(t,{label:"\u8F6E\u64AD\u56FE",width:"200"},{default:a(i=>[g("img",{style:{width:"150px",height:"150px"},src:i.row.carouselUrl,alt:"\u8F6E\u64AD\u56FE"},null,8,se)]),_:1}),o(t,{label:"\u8DF3\u8F6C\u94FE\u63A5"},{default:a(i=>[g("a",{target:"_blank",href:i.row.redirectUrl},Y(i.row.redirectUrl),9,ne)]),_:1}),o(t,{prop:"carouselRank",label:"\u6392\u5E8F\u503C",width:"120"}),o(t,{prop:"createTime",label:"\u6DFB\u52A0\u65F6\u95F4",width:"200"})]),_:1},8,["load","data"]),o(w,{background:"",layout:"prev, pager, next",total:l.total,"page-size":l.pageSize,"current-page":l.currentPage,onCurrentChange:k},null,8,["total","page-size","current-page"])]),_:1}),o(ae,{ref_key:"addSwiper",ref:u,reload:n,type:l.type},null,8,["type"])],64)}}};var ke=C(ie,[["__file","/Users/picopicopico/Programmer/Project/Web_Project/vue3-admin/src/views/Swiper.vue"]]);export{ke as default};
