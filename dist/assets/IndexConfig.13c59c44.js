import{_ as V,r as k,g as P,o as S,c as R,w as a,b,f as t,q as v,K as f,s as g,h as z,i as $,l as j,j as E,L as G,x as q,v as A,d as M,M as O,N as W,O as J,P as K,E as L,m as Q,Q as H,R as w,J as X,S as Y,T as Z,p as ee,a as oe}from"./index.b5a3525d.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                   *//* empty css                *//* empty css                  */const te={class:"dialog-footer"},ne={__name:"DialogAddGood",props:{type:String,configType:Number,reload:Function},setup(c,{expose:h}){const s=c,x=k(null),e=P({visible:!1,ruleForm:{name:"",link:"",id:"",sort:""},rules:{name:[{required:"true",message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change"]}],id:[{required:"true",message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change"]}],sort:[{required:"true",message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change"]}]},id:""}),_=i=>{g.get(`/indexConfigs/${i}`).then(l=>{e.ruleForm={name:l.configName,id:l.goodsId,link:l.redirectUrl,sort:l.configRank}})},o=i=>{e.visible=!0,i?(e.id=i,_(i)):e.ruleForm={name:"",id:"",link:"",sort:""}},d=()=>{e.visible=!1},C=()=>{x.value.validate(i=>{if(i){if(e.ruleForm.id<0||e.ruleForm.id>200){f.error("\u5546\u54C1\u7F16\u53F7\u4E0D\u80FD\u5C0F\u4E8E 0 \u6216\u5927\u4E8E 200");return}s.type=="add"?g.post("/indexConfigs",{configType:s.configType||3,configName:e.ruleForm.name,redirectUrl:e.ruleForm.link,goodsId:e.ruleForm.id,configRank:e.ruleForm.sort}).then(()=>{f.success("\u6DFB\u52A0\u6210\u529F"),e.visible=!1,s.reload&&s.reload()}):g.put("/indexConfigs",{configId:e.id,configType:s.configType||3,configName:e.ruleForm.name,redirectUrl:e.ruleForm.link,goodsId:e.ruleForm.id,configRank:e.ruleForm.sort}).then(()=>{f.success("\u4FEE\u6539\u6210\u529F"),e.visible=!1,s.reload&&s.reload()})}})};return h({open:o,close:d}),(i,l)=>{const p=z,m=$,F=j,n=E,T=G;return S(),R(T,{title:c.type=="add"?"\u6DFB\u52A0\u5546\u54C1":"\u4FEE\u6539\u5546\u54C1",modelValue:e.visible,"onUpdate:modelValue":l[5]||(l[5]=r=>e.visible=r),width:"400px"},{footer:a(()=>[b("span",te,[t(n,{onClick:l[4]||(l[4]=r=>e.visible=!1)},{default:a(()=>[v("\u53D6 \u6D88")]),_:1}),t(n,{type:"primary",onClick:C},{default:a(()=>[v("\u786E \u5B9A")]),_:1})])]),default:a(()=>[t(F,{model:e.ruleForm,rules:e.rules,ref_key:"formRef",ref:x,"label-width":"100px",class:"good-form"},{default:a(()=>[t(m,{label:"\u5546\u54C1\u540D\u79F0",prop:"name"},{default:a(()=>[t(p,{type:"text",modelValue:e.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=r=>e.ruleForm.name=r)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u8DF3\u8F6C\u94FE\u63A5",prop:"link"},{default:a(()=>[t(p,{type:"text",modelValue:e.ruleForm.link,"onUpdate:modelValue":l[1]||(l[1]=r=>e.ruleForm.link=r)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5546\u54C1\u7F16\u53F7",prop:"id"},{default:a(()=>[t(p,{type:"number",min:"0",modelValue:e.ruleForm.id,"onUpdate:modelValue":l[2]||(l[2]=r=>e.ruleForm.id=r)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6392\u5E8F\u503C",prop:"sort"},{default:a(()=>[t(p,{type:"number",modelValue:e.ruleForm.sort,"onUpdate:modelValue":l[3]||(l[3]=r=>e.ruleForm.sort=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}};var le=V(ne,[["__file","/Users/picopicopico/Programmer/Project/Web_Project/vue3-admin/src/components/DialogAddGood.vue"]]);const ae=c=>(ee("data-v-c24c5f2c"),c=c(),oe(),c),re={class:"header"},ie=["href"],se=["onClick"],de=ae(()=>b("a",{style:{cursor:"pointer"}},"\u5220\u9664",-1)),ce={__name:"IndexConfig",setup(c){const h={hot:3,new:4,recommend:5},s=q(),x=A(),e=k(null),_=k(null),o=P({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10,type:"add",configType:3});s.beforeEach(n=>{["hot","new","recommend"].includes(n.name)&&(o.configType=h[n.name],o.currentPage=1,d())}),M(()=>{o.configType=h[x.name],d()});const d=()=>{o.loading=!0,g.get("/indexConfigs",{params:{pageNumber:o.currentPage,pageSize:o.pageSize,configType:o.configType}}).then(n=>{o.tableData=n.list,o.total=n.totalCount,o.currentPage=n.currPage,o.loading=!1})},C=()=>{o.type="add",_.value.open()},i=n=>{o.type="edit",_.value.open(n)},l=n=>{o.multipleSelection=n},p=()=>{if(!o.multipleSelection.length){f.error("\u8BF7\u9009\u62E9\u9879");return}g.delete("/indexConfigs",{ids:o.multipleSelection.map(n=>n.configId)}).then(()=>{f.success("\u5220\u9664\u6210\u529F"),d()})},m=n=>{g.delete("/indexConfigs",{ids:[n]}).then(()=>{f.success("\u5220\u9664\u6210\u529F"),d()})},F=n=>{o.currentPage=n,d()};return(n,T)=>{const r=E,I=O,u=W,U=J,D=K,N=L;return S(),Q(H,null,[t(N,{class:"index-container"},{header:a(()=>[b("div",re,[t(r,{type:"primary",icon:w(Y),onClick:C},{default:a(()=>[v("\u589E\u52A0")]),_:1},8,["icon"]),t(I,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",onConfirm:p},{reference:a(()=>[t(r,{type:"danger",icon:w(Z)},{default:a(()=>[v("\u6279\u91CF\u5220\u9664")]),_:1},8,["icon"])]),_:1})])]),default:a(()=>[t(U,{load:o.loading,ref_key:"multipleTable",ref:e,data:o.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:l},{default:a(()=>[t(u,{type:"selection",width:"55"}),t(u,{prop:"configName",label:"\u5546\u54C1\u540D\u79F0"}),t(u,{label:"\u8DF3\u8F6C\u94FE\u63A5"},{default:a(y=>[b("a",{target:"_blank",href:y.row.redirectUrl},X(y.row.redirectUrl),9,ie)]),_:1}),t(u,{prop:"configRank",label:"\u6392\u5E8F\u503C",width:"120"}),t(u,{prop:"goodsId",label:"\u5546\u54C1\u7F16\u53F7",width:"200"}),t(u,{prop:"createTime",label:"\u6DFB\u52A0\u65F6\u95F4",width:"200"}),t(u,{label:"\u64CD\u4F5C",width:"100"},{default:a(y=>[b("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:B=>i(y.row.configId)},"\u4FEE\u6539",8,se),t(I,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",onConfirm:B=>m(y.row.configId)},{reference:a(()=>[de]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["load","data"]),t(D,{background:"",layout:"prev, pager, next",total:o.total,"page-size":o.pageSize,"current-page":o.currentPage,onCurrentChange:F},null,8,["total","page-size","current-page"])]),_:1}),t(le,{ref_key:"addGood",ref:_,reload:d,type:o.type,configType:o.configType},null,8,["type","configType"])],64)}}};var ve=V(ce,[["__scopeId","data-v-c24c5f2c"],["__file","/Users/picopicopico/Programmer/Project/Web_Project/vue3-admin/src/views/IndexConfig.vue"]]);export{ve as default};
