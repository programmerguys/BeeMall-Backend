import{_ as z,g as B,d as D,s as m,h as M,X as j,Y as U,j as q,N as L,M as F,G,O as J,P as K,E as Q,o as n,c as p,w as a,b as c,f as l,m as _,Z as R,Q as W,$ as g,q as f,R as v,J as X,K as d,a0 as w,T as Y}from"./index.b5a3525d.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                   */const Z={class:"header"},A={key:0},H={key:1},ee={key:2},te=c("a",{style:{cursor:"pointer","margin-right":"10px"}},"\u914D\u8D27\u5B8C\u6210",-1),oe=c("a",{style:{cursor:"pointer","margin-right":"10px"}},"\u51FA\u5E93",-1),re=c("a",{style:{cursor:"pointer","margin-right":"10px"}},"\u5173\u95ED\u8BA2\u5355",-1),le={__name:"Order",setup(ae){const e=B({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10,orderNo:"",orderStatus:"",options:[{value:"",label:"\u5168\u90E8"},{value:0,label:"\u5F85\u652F\u4ED8"},{value:1,label:"\u5DF2\u652F\u4ED8"},{value:2,label:"\u914D\u8D27\u5B8C\u6210"},{value:3,label:"\u51FA\u5E93\u6210\u529F"},{value:4,label:"\u4EA4\u6613\u6210\u529F"},{value:-1,label:"\u624B\u52A8\u5173\u95ED"},{value:-2,label:"\u8D85\u65F6\u5173\u95ED"},{value:-3,label:"\u5546\u5BB6\u5173\u95ED"}]});D(()=>{u()});const u=()=>{e.loading=!0,m.get("/orders",{params:{pageNumber:e.currentPage,pageSize:e.pageSize,orderNo:e.orderNo,orderStatus:e.orderStatus}}).then(r=>{e.tableData=r.list,e.total=r.totalCount,e.currentPage=r.currPage,e.loading=!1})},y=()=>{e.currentPage=1,u()},P=r=>{e.multipleSelection=r},E=r=>{e.currentPage=r,u()},S=r=>{let o;if(r)o=[r];else{if(!e.multipleSelection.length){console.log("state.multipleSelection",e.multipleSelection.length),d.error("\u8BF7\u9009\u62E9\u9879");return}o=e.multipleSelection.map(i=>i.orderId)}m.put("/orders/checkDone",{ids:o}).then(()=>{d.success("\u914D\u8D27\u6210\u529F"),u()})},C=r=>{let o;if(r)o=[r];else{if(!e.multipleSelection.length){d.error("\u8BF7\u9009\u62E9\u9879");return}o=e.multipleSelection.map(i=>i.orderId)}m.put("/orders/checkOut",{ids:o}).then(()=>{d.success("\u51FA\u5E93\u6210\u529F"),u()})},k=r=>{let o;if(r)o=[r];else{if(!e.multipleSelection.length){d.error("\u8BF7\u9009\u62E9\u9879");return}o=e.multipleSelection.map(i=>i.orderId)}m.put("/orders/close",{ids:o}).then(()=>{d.success("\u5173\u95ED\u6210\u529F"),u()})};return(r,o)=>{const i=M,N=j,V=U,b=q,s=L,h=F,I=G("router-link"),O=J,T=K,$=Q;return n(),p($,{class:"order-container"},{header:a(()=>[c("div",Z,[l(i,{style:{width:"200px","margin-right":"10px"},placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7",modelValue:e.orderNo,"onUpdate:modelValue":o[0]||(o[0]=t=>e.orderNo=t),onChange:y,clearable:""},null,8,["modelValue"]),l(V,{onChange:y,modelValue:e.orderStatus,"onUpdate:modelValue":o[1]||(o[1]=t=>e.orderStatus=t),style:{width:"200px","margin-right":"10px"}},{default:a(()=>[(n(!0),_(W,null,R(e.options,t=>(n(),p(N,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),g(' <el-button type="primary" size="small" icon="el-icon-edit">\u4FEE\u6539\u8BA2\u5355</el-button> '),l(b,{type:"primary",icon:v(w),onClick:o[2]||(o[2]=t=>S())},{default:a(()=>[f("\u914D\u8D27\u5B8C\u6210")]),_:1},8,["icon"]),l(b,{type:"primary",icon:v(w),onClick:o[3]||(o[3]=t=>C())},{default:a(()=>[f("\u51FA\u5E93")]),_:1},8,["icon"]),l(b,{type:"danger",icon:v(Y),onClick:o[4]||(o[4]=t=>k())},{default:a(()=>[f("\u5173\u95ED\u8BA2\u5355")]),_:1},8,["icon"])])]),default:a(()=>[l(O,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:P},{default:a(()=>[l(s,{type:"selection",width:"55"}),l(s,{prop:"orderNo",label:"\u8BA2\u5355\u53F7"}),l(s,{prop:"totalPrice",label:"\u8BA2\u5355\u603B\u4EF7"}),l(s,{prop:"orderStatus",label:"\u8BA2\u5355\u72B6\u6001"},{default:a(t=>[c("span",null,X(r.$filters.orderMap(t.row.orderStatus)),1)]),_:1}),l(s,{prop:"payType",label:"\u652F\u4ED8\u65B9\u5F0F"},{default:a(t=>[t.row.payType==1?(n(),_("span",A,"\u5FAE\u4FE1\u652F\u4ED8")):t.row.payType==2?(n(),_("span",H,"\u652F\u4ED8\u5B9D\u652F\u4ED8")):(n(),_("span",ee,"\u672A\u77E5"))]),_:1}),l(s,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"}),l(s,{label:"\u64CD\u4F5C"},{default:a(t=>[t.row.orderStatus==1?(n(),p(h,{key:0,title:"\u786E\u5B9A\u914D\u8D27\u5B8C\u6210\u5417\uFF1F",onConfirm:x=>S(t.row.orderId),"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88"},{reference:a(()=>[te]),_:2},1032,["onConfirm"])):g("v-if",!0),t.row.orderStatus==2?(n(),p(h,{key:1,title:"\u786E\u5B9A\u51FA\u5E93\u5417\uFF1F",onConfirm:x=>C(t.row.orderId),"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88"},{reference:a(()=>[oe]),_:2},1032,["onConfirm"])):g("v-if",!0),t.row.orderStatus==4||t.row.orderStatus<0?g("v-if",!0):(n(),p(h,{key:2,title:"\u786E\u5B9A\u5173\u95ED\u8BA2\u5355\u5417\uFF1F",onConfirm:x=>k(t.row.orderId),"confirm-button-text":"\u786E\u5B9A","cancel-button-text":"\u53D6\u6D88"},{reference:a(()=>[re]),_:2},1032,["onConfirm"])),l(I,{to:{path:"/order_detail",query:{id:t.row.orderId}}},{default:a(()=>[f("\u8BA2\u5355\u8BE6\u60C5")]),_:2},1032,["to"])]),_:1})]),_:1},8,["load","data"]),l(T,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:E},null,8,["total","page-size","current-page"])]),_:1})}}};var _e=z(le,[["__file","/Users/picopicopico/Programmer/Project/Web_Project/vue3-admin/src/views/Order.vue"]]);export{_e as default};
